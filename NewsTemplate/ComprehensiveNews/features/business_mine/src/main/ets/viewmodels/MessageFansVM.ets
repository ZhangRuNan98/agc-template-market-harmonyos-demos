import { BaseViewModel } from 'lib_common';
import { AuthorModel, MessageServiceApi, MineServiceApi } from 'lib_news_api';
import { AuthorDataSource } from '../common/AuthorDataSource';

@ObservedV2
export class MsgFansViewModel extends BaseViewModel {
  @Trace fansDataSource: AuthorDataSource = new AuthorDataSource();

  constructor() {
    super();
    this.setAllRead();
    this.queryNewFansList();
  }

  queryNewFansList() {
    const list = MineServiceApi.queryNewFans().map(v => new AuthorModel(v));
    this.fansDataSource.setData(list);
  }

  setAllRead() {
    MessageServiceApi.setNewFansRead();
  }
}